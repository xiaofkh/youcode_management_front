# å¸ƒå±€ç»„ä»¶è®¾è®¡æ–¹æ¡ˆ

## ä¸€ã€æ•´ä½“å¸ƒå±€ç»“æ„

### 1.1 å¸ƒå±€æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Header (å›ºå®šé¡¶éƒ¨)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Logo                                    ç”¨æˆ·å¤´åƒ â–¼ (ä¸‹æ‹‰èœå•)    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚                                                     â”‚
â”‚   Sidebar     â”‚                    Content Area                     â”‚
â”‚   (å›ºå®šå·¦ä¾§)   â”‚                    (ä¸»å†…å®¹åŒºåŸŸ)                      â”‚
â”‚               â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                                     â”‚
â”‚  â”‚ æ¦‚è§ˆ     â”‚ â”‚                                                     â”‚
â”‚  â”‚  â”œ æ€»è§ˆ  â”‚ â”‚                                                     â”‚
â”‚  â”‚  â”œ æ´»è·ƒ  â”‚ â”‚                                                     â”‚
â”‚  â”‚  â”œ ä»£ç   â”‚ â”‚                                                     â”‚
â”‚  â”‚  â”” ...   â”‚ â”‚                                                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚                                                     â”‚
â”‚  â”‚ ç®¡ç† â–¼  â”‚ â”‚                                                     â”‚
â”‚  â”‚  â”œ ç”¨æˆ·  â”‚ â”‚                                                     â”‚
â”‚  â”‚  â”œ å¯¼å…¥  â”‚ â”‚                                                     â”‚
â”‚  â”‚  â”” é¡µç­¾  â”‚ â”‚                                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                                     â”‚
â”‚               â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 å¸ƒå±€å°ºå¯¸è§„èŒƒ

| åŒºåŸŸ | å°ºå¯¸ | è¯´æ˜ |
|------|------|------|
| Header é«˜åº¦ | 64px | å›ºå®šé«˜åº¦ï¼Œ`sticky top-0` |
| Sidebar å®½åº¦ | 256px (16rem) | å›ºå®šå®½åº¦ï¼Œå¯æŠ˜å åˆ° 64px |
| Sidebar æŠ˜å å®½åº¦ | 64px | ä»…æ˜¾ç¤ºå›¾æ ‡ |
| Content æœ€å°å®½åº¦ | 800px | ä¿è¯å†…å®¹å¯è¯»æ€§ |

---

## äºŒã€Header ç»„ä»¶è®¾è®¡

### 2.1 åŠŸèƒ½éœ€æ±‚

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| Logoå±•ç¤º | æ˜¾ç¤ºå“ç‰ŒLogoå’Œåç§° | P0 |
| ç”¨æˆ·ä¿¡æ¯å±•ç¤º | æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·å/å¤´åƒ | P0 |
| ç™»å‡ºåŠŸèƒ½ | ç‚¹å‡»ç™»å‡ºæŒ‰é’®é€€å‡ºç™»å½• | P0 |
| ç”¨æˆ·ä¸‹æ‹‰èœå• | æ˜¾ç¤ºé‚®ç®±ã€ç™»å‡ºé€‰é¡¹ | P0 |

### 2.2 è§†è§‰è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚   ğŸ“Š YouCode Statistics Dashboard                    ğŸ‘¤ å¼ ä¸‰ â–¼      â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                                      â”‚
     â””â”€â”€ Logo + æ ‡é¢˜                                        â””â”€â”€ ç”¨æˆ·ä¸‹æ‹‰èœå•
```

**æ ·å¼è§„èŒƒï¼š**
- **èƒŒæ™¯è‰²**: ä¸»é¢˜è“è‰² `bg-blue-600` æˆ–æ¸å˜ `bg-gradient-to-r from-blue-600 to-purple-600`
- **æ–‡å­—è‰²**: ç™½è‰² `text-white`
- **Logo**: Lucide `LineChart` å›¾æ ‡ + æ–‡å­—
- **é«˜åº¦**: `h-16` (64px)
- **å†…è¾¹è·**: `px-6`
- **é˜´å½±**: `shadow-md`
- **å›ºå®šå®šä½**: `sticky top-0 z-50`

### 2.3 ç”¨æˆ·ä¸‹æ‹‰èœå•è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ å¼ ä¸‰ â–¼            â”‚  â† è§¦å‘æŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ zhangsan@company.com â”‚  â† é‚®ç®±ï¼ˆç°è‰²å°å­—ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸšª ç™»å‡º              â”‚  â† ç™»å‡ºæŒ‰é’®ï¼ˆçº¢è‰²é«˜äº®ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’è¯´æ˜ï¼š**
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºä¸‹æ‹‰èœå•
- ç‚¹å‡»ç™»å‡ºè°ƒç”¨é€€å‡ºAPIå¹¶è·³è½¬åˆ°ç™»å½•é¡µ
- ä¸‹æ‹‰èœå•ä½¿ç”¨ Radix `DropdownMenu` ç»„ä»¶

### 2.4 ç»„ä»¶å®ç°ä»£ç 

```tsx
// src/components/layout/Header.tsx
import { useNavigate } from 'react-router-dom'
import { useAtom } from 'jotai'
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu'
import { Button } from '@/components/ui/button'
import { LineChart, User, LogOut, ChevronDown } from 'lucide-react'
import { currentUserAtom } from '@/store/dashboard'
import { authApi } from '@/lib/api'

export function Header() {
  const navigate = useNavigate()
  const [currentUser] = useAtom(currentUserAtom)

  const handleLogout = async () => {
    try {
      await authApi.logout()
      navigate('/login')
    } catch (error) {
      console.error('ç™»å‡ºå¤±è´¥:', error)
    }
  }

  return (
    <header className="sticky top-0 z-50 flex h-16 items-center justify-between bg-gradient-to-r from-blue-600 to-purple-600 px-6 shadow-md">
      {/* Logo åŒºåŸŸ */}
      <div className="flex items-center gap-3">
        <LineChart className="h-8 w-8 text-white" />
        <h1 className="text-xl font-semibold text-white">
          YouCode Statistics Dashboard
        </h1>
      </div>

      {/* ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ */}
      <DropdownMenu>
        <DropdownMenuTrigger asChild>
          <Button
            variant="ghost"
            className="flex items-center gap-2 text-white hover:bg-white/10"
          >
            <div className="flex h-8 w-8 items-center justify-center rounded-full bg-white/20">
              <User className="h-5 w-5" />
            </div>
            <span className="font-medium">
              {currentUser?.displayName || 'ç”¨æˆ·'}
            </span>
            <ChevronDown className="h-4 w-4" />
          </Button>
        </DropdownMenuTrigger>
        <DropdownMenuContent align="end" className="w-56">
          <DropdownMenuLabel className="font-normal">
            <div className="flex flex-col space-y-1">
              <p className="text-sm font-medium">
                {currentUser?.displayName}
              </p>
              <p className="text-xs text-muted-foreground">
                {currentUser?.email}
              </p>
            </div>
          </DropdownMenuLabel>
          <DropdownMenuSeparator />
          <DropdownMenuItem
            onClick={handleLogout}
            className="text-red-600 focus:text-red-600"
          >
            <LogOut className="mr-2 h-4 w-4" />
            ç™»å‡º
          </DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    </header>
  )
}
```

### 2.5 Header æ ·å¼å˜ä½“

| å˜ä½“ | ä½¿ç”¨åœºæ™¯ | æ ·å¼å·®å¼‚ |
|------|----------|----------|
| é»˜è®¤ | æ­£å¸¸é¡µé¢ | æ¸å˜è“ç´«è‰²èƒŒæ™¯ |
| ç®¡ç†é¡µé¢ | ç®¡ç†æ§åˆ¶å° | æ·±è‰²èƒŒæ™¯ `bg-gray-900` |
| é€æ˜ | ç™»å½•é¡µ | æ— èƒŒæ™¯ï¼Œç”¨äºè¦†ç›–åœ¨å›¾ç‰‡ä¸Š |

---

## ä¸‰ã€Sidebar ç»„ä»¶è®¾è®¡

### 3.1 èœå•ç»“æ„

æ ¹æ®åŸé¡¹ç›®åˆ†æï¼Œä¾§è¾¹æ åˆ†ä¸ºä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼š

```
ä¾§è¾¹æ èœå•ç»“æ„
â”œâ”€â”€ æ¦‚è§ˆ (ä¸€çº§ç›®å½•ï¼Œå¯å±•å¼€)
â”‚   â”œâ”€â”€ æ€»è§ˆ
â”‚   â”œâ”€â”€ æ´»è·ƒç”¨æˆ·
â”‚   â”œâ”€â”€ ä»£ç ç”Ÿæˆç”¨æˆ·
â”‚   â”œâ”€â”€ ä»£ç ç”Ÿæˆè¯¦æƒ…
â”‚   â”œâ”€â”€ é‡‡çº³AIä»£ç 
â”‚   â”œâ”€â”€ YouMa Nextå®‰è£…
â”‚   â”œâ”€â”€ MCPä½¿ç”¨ç»Ÿè®¡
â”‚   â”œâ”€â”€ ææ ·ç»Ÿè®¡
â”‚   â”œâ”€â”€ æˆæœ¬ç»Ÿè®¡
â”‚   â”œâ”€â”€ è¯­è¨€ç»Ÿè®¡
â”‚   â”œâ”€â”€ ä½¿ç”¨å¤©æ•°ç»Ÿè®¡
â”‚   â”œâ”€â”€ æ¨¡å¼ä½¿ç”¨è¯¦æƒ…
â”‚   â””â”€â”€ è‡ªåŠ¨è¡¥å…¨é‡‡çº³
â”‚
â””â”€â”€ ç®¡ç† (äºŒçº§ç›®å½•ï¼Œå¯å±•å¼€ï¼Œéœ€è¦æƒé™)
    â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
    â”œâ”€â”€ å¼€å‘äº‘ç”¨æˆ·å¯¼å…¥
    â””â”€â”€ é¡µç­¾ç®¡ç†
```

### 3.2 è§†è§‰è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚
â”‚   æ¦‚è§ˆ    â–¼        â”‚  â† ç‚¹å‡»å¯å±•å¼€/æŠ˜å 
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ğŸ“Š æ€»è§ˆ          â”‚  â† å­èœå•é¡¹ï¼ˆæ¿€æ´»çŠ¶æ€é«˜äº®ï¼‰
â”‚   ğŸ‘¥ æ´»è·ƒç”¨æˆ·      â”‚
â”‚   ğŸ’» ä»£ç ç”Ÿæˆç”¨æˆ·  â”‚
â”‚   ğŸ“ ä»£ç ç”Ÿæˆè¯¦æƒ…  â”‚
â”‚   âœ“  é‡‡çº³AIä»£ç     â”‚
â”‚   ğŸ“¦ YouMaå®‰è£…     â”‚
â”‚   ğŸ”§ MCPä½¿ç”¨       â”‚
â”‚   ğŸ¯ ææ ·ç»Ÿè®¡      â”‚
â”‚   ğŸ’° æˆæœ¬ç»Ÿè®¡      â”‚
â”‚   ğŸŒ è¯­è¨€ç»Ÿè®¡      â”‚
â”‚   ğŸ“… ä½¿ç”¨å¤©æ•°      â”‚
â”‚   âš™ï¸ æ¨¡å¼ä½¿ç”¨      â”‚
â”‚   âš¡ è‡ªåŠ¨è¡¥å…¨      â”‚
â”‚                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ç®¡ç†    â–¼        â”‚  â† ç‚¹å‡»å¯å±•å¼€/æŠ˜å ï¼ˆç‹¬ç«‹æ§åˆ¶ï¼‰
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ğŸ‘¤ ç”¨æˆ·ç®¡ç†      â”‚
â”‚   â˜ï¸ å¼€å‘äº‘å¯¼å…¥    â”‚
â”‚   ğŸ“‘ é¡µç­¾ç®¡ç†      â”‚
â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**è¯´æ˜ï¼šæ¦‚è§ˆå’Œç®¡ç†èœå•å¯ä»¥åŒæ—¶å±•å¼€ï¼Œäº’ä¸å½±å“**

æŠ˜å çŠ¶æ€ç¤ºä¾‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚
â”‚   æ¦‚è§ˆ    â–¶        â”‚  â† æŠ˜å çŠ¶æ€
â”‚                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ç®¡ç†    â–¶        â”‚  â† æŠ˜å çŠ¶æ€
â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 æ ·å¼è§„èŒƒ

**æ•´ä½“æ ·å¼ï¼š**
- **èƒŒæ™¯è‰²**: ç™½è‰² `bg-white` æˆ–æµ…ç° `bg-gray-50`
- **å®½åº¦**: `w-64` (256px)
- **è¾¹æ¡†**: å³ä¾§è¾¹æ¡† `border-r border-gray-200`
- **é«˜åº¦**: å…¨å±é«˜åº¦å‡å»Header `h-[calc(100vh-64px)]`
- **æº¢å‡º**: å‚ç›´æ»šåŠ¨ `overflow-y-auto`
- **å›ºå®šå®šä½**: `sticky top-16`

**ä¸€çº§èœå•é¡¹æ ·å¼ï¼š**
- **é«˜åº¦**: `h-12` (48px)
- **å†…è¾¹è·**: `px-4`
- **å­—ä½“**: `text-sm font-semibold`
- **èƒŒæ™¯è‰²**: é»˜è®¤é€æ˜ï¼Œhover `bg-gray-100`
- **æ–‡å­—è‰²**: `text-gray-700`
- **å±•å¼€å›¾æ ‡**: `ChevronDown` / `ChevronRight`

**äºŒçº§èœå•é¡¹æ ·å¼ï¼š**
- **é«˜åº¦**: `h-10` (40px)
- **å·¦å†…è¾¹è·**: `pl-8` (ç¼©è¿›)
- **å­—ä½“**: `text-sm font-medium`
- **æ¿€æ´»çŠ¶æ€**: `bg-blue-50 text-blue-600 border-r-2 border-blue-600`
- **æ‚¬åœçŠ¶æ€**: `hover:bg-gray-100`

### 3.4 äº¤äº’è¯´æ˜

| äº¤äº’ | è¡Œä¸º |
|------|------|
| ç‚¹å‡»ä¸€çº§èœå• | å±•å¼€/æŠ˜å è¯¥èœå•çš„å­èœå•ï¼ˆå¤šä¸ªèœå•å¯åŒæ—¶å±•å¼€ï¼‰ |
| ç‚¹å‡»äºŒçº§èœå• | å¯¼èˆªåˆ°å¯¹åº”é¡µé¢ï¼Œé«˜äº®å½“å‰é¡¹ |
| é¡µé¢åŠ è½½ | è‡ªåŠ¨å±•å¼€å½“å‰é¡µé¢æ‰€å±çš„ä¸€çº§èœå• |
| æƒé™æ§åˆ¶ | ç›®å‰å…ˆå†™å›ºå®šèœå•ï¼Œåç»­æ ¹æ®ç”¨æˆ·æƒé™åŠ¨æ€åŠ è½½ |

### 3.5 ç»„ä»¶å®ç°ä»£ç 

```tsx
// src/components/layout/Sidebar.tsx
import { useState } from 'react'
import { NavLink, useLocation } from 'react-router-dom'
import { cn } from '@/lib/utils'
import {
  LayoutDashboard,
  Users,
  Code,
  FileCode,
  CheckCircle,
  Package,
  Wrench,
  Target,
  DollarSign,
  Globe,
  Calendar,
  Settings,
  Zap,
  ChevronDown,
  ChevronRight,
  UserCog,
  CloudDownload,
  LayoutGrid,
} from 'lucide-react'

// èœå•é…ç½®
const menuConfig = [
  {
    key: 'overview',
    label: 'æ¦‚è§ˆ',
    icon: LayoutDashboard,
    children: [
      { path: '/overview', label: 'æ€»è§ˆ', icon: LayoutDashboard },
      { path: '/active-users', label: 'æ´»è·ƒç”¨æˆ·', icon: Users },
      { path: '/codegen-users', label: 'ä»£ç ç”Ÿæˆç”¨æˆ·', icon: Code },
      { path: '/codegen-details', label: 'ä»£ç ç”Ÿæˆè¯¦æƒ…', icon: FileCode },
      { path: '/code-adoption', label: 'é‡‡çº³AIä»£ç ', icon: CheckCircle },
      { path: '/youma-install', label: 'YouMa Nextå®‰è£…', icon: Package },
      { path: '/mcp-usage', label: 'MCPä½¿ç”¨ç»Ÿè®¡', icon: Wrench },
      { path: '/extreme-sample', label: 'ææ ·ç»Ÿè®¡', icon: Target },
      { path: '/cost-stats', label: 'æˆæœ¬ç»Ÿè®¡', icon: DollarSign },
      { path: '/language-stats', label: 'è¯­è¨€ç»Ÿè®¡', icon: Globe },
      { path: '/usage-days', label: 'ä½¿ç”¨å¤©æ•°ç»Ÿè®¡', icon: Calendar },
      { path: '/mode-usage', label: 'æ¨¡å¼ä½¿ç”¨è¯¦æƒ…', icon: Settings },
      { path: '/autocomplete', label: 'è‡ªåŠ¨è¡¥å…¨é‡‡çº³', icon: Zap },
    ],
  },
  {
    key: 'management',
    label: 'ç®¡ç†',
    icon: Settings,
    requiresAdmin: true, // éœ€è¦ç®¡ç†å‘˜æƒé™
    children: [
      { path: '/manage/users', label: 'ç”¨æˆ·ç®¡ç†', icon: UserCog },
      { path: '/manage/devcloud-users', label: 'å¼€å‘äº‘ç”¨æˆ·å¯¼å…¥', icon: CloudDownload },
      { path: '/manage/tabs', label: 'é¡µç­¾ç®¡ç†', icon: LayoutGrid },
    ],
  },
]

interface SidebarProps {
  isAdmin?: boolean
}

export function Sidebar({ isAdmin = false }: SidebarProps) {
  const location = useLocation()
  
  // æ ¹æ®å½“å‰è·¯å¾„ç¡®å®šé»˜è®¤å±•å¼€çš„èœå•
  const getDefaultExpanded = () => {
    const currentPath = location.pathname
    for (const menu of menuConfig) {
      if (menu.children.some((child) => currentPath.startsWith(child.path))) {
        return menu.key
      }
    }
    return 'overview' // é»˜è®¤å±•å¼€æ¦‚è§ˆ
  }

  // ä½¿ç”¨ Set å­˜å‚¨å±•å¼€çš„èœå•ï¼Œæ”¯æŒå¤šä¸ªåŒæ—¶å±•å¼€
  const [expandedMenus, setExpandedMenus] = useState<Set<string>>(() => {
    const defaults = new Set<string>()
    defaults.add(getDefaultExpanded())
    return defaults
  })

  const toggleMenu = (key: string) => {
    setExpandedMenus((prev) => {
      const next = new Set(prev)
      if (next.has(key)) {
        next.delete(key)
      } else {
        next.add(key)
      }
      return next
    })
  }

  return (
    <aside className="sticky top-16 h-[calc(100vh-64px)] w-64 overflow-y-auto border-r border-gray-200 bg-white">
      <nav className="p-4">
        {menuConfig.map((menu) => {
          // æƒé™æ£€æŸ¥
          if (menu.requiresAdmin && !isAdmin) {
            return null
          }

          const isExpanded = expandedMenus.has(menu.key)
          const Icon = menu.icon

          return (
            <div key={menu.key} className="mb-2">
              {/* ä¸€çº§èœå• */}
              <button
                onClick={() => toggleMenu(menu.key)}
                className={cn(
                  'flex w-full items-center justify-between rounded-lg px-4 py-3 text-left text-sm font-semibold transition-colors',
                  isExpanded
                    ? 'bg-gray-100 text-gray-900'
                    : 'text-gray-700 hover:bg-gray-50'
                )}
              >
                <div className="flex items-center gap-3">
                  <Icon className="h-5 w-5" />
                  <span>{menu.label}</span>
                </div>
                {isExpanded ? (
                  <ChevronDown className="h-4 w-4" />
                ) : (
                  <ChevronRight className="h-4 w-4" />
                )}
              </button>

              {/* äºŒçº§èœå• */}
              {isExpanded && (
                <div className="mt-1 space-y-1 pl-4">
                  {menu.children.map((child) => {
                    const ChildIcon = child.icon
                    return (
                      <NavLink
                        key={child.path}
                        to={child.path}
                        className={({ isActive }) =>
                          cn(
                            'flex items-center gap-3 rounded-lg px-4 py-2 text-sm font-medium transition-colors',
                            isActive
                              ? 'border-r-2 border-blue-600 bg-blue-50 text-blue-600'
                              : 'text-gray-600 hover:bg-gray-100'
                          )
                        }
                      >
                        <ChildIcon className="h-4 w-4" />
                        <span>{child.label}</span>
                      </NavLink>
                    )
                  })}
                </div>
              )}
            </div>
          )
        })}
      </nav>
    </aside>
  )
}
```

### 3.6 èœå•å›¾æ ‡æ˜ å°„

| èœå•é¡¹ | Lucide å›¾æ ‡ | è¯´æ˜ |
|--------|-------------|------|
| æ¦‚è§ˆ | `LayoutDashboard` | ä»ªè¡¨ç›˜ |
| æ´»è·ƒç”¨æˆ· | `Users` | ç”¨æˆ·ç»„ |
| ä»£ç ç”Ÿæˆç”¨æˆ· | `Code` | ä»£ç ç¬¦å· |
| ä»£ç ç”Ÿæˆè¯¦æƒ… | `FileCode` | ä»£ç æ–‡ä»¶ |
| é‡‡çº³AIä»£ç  | `CheckCircle` | å‹¾é€‰åœˆ |
| YouMaå®‰è£… | `Package` | åŒ…è£¹ |
| MCPä½¿ç”¨ | `Wrench` | æ‰³æ‰‹ |
| ææ ·ç»Ÿè®¡ | `Target` | é¶å¿ƒ |
| æˆæœ¬ç»Ÿè®¡ | `DollarSign` | ç¾å…ƒç¬¦å· |
| è¯­è¨€ç»Ÿè®¡ | `Globe` | åœ°çƒ |
| ä½¿ç”¨å¤©æ•° | `Calendar` | æ—¥å† |
| æ¨¡å¼ä½¿ç”¨ | `Settings` | è®¾ç½® |
| è‡ªåŠ¨è¡¥å…¨ | `Zap` | é—ªç”µ |
| ç®¡ç† | `Settings` | è®¾ç½® |
| ç”¨æˆ·ç®¡ç† | `UserCog` | ç”¨æˆ·è®¾ç½® |
| å¼€å‘äº‘å¯¼å…¥ | `CloudDownload` | äº‘ä¸‹è½½ |
| é¡µç­¾ç®¡ç† | `LayoutGrid` | å¸ƒå±€ç½‘æ ¼ |

---

## å››ã€æ•´ä½“å¸ƒå±€ç»„ä»¶

### 4.1 DashboardLayout ç»„ä»¶

```tsx
// src/components/layout/DashboardLayout.tsx
import { Outlet } from 'react-router-dom'
import { useAtom } from 'jotai'
import { Header } from './Header'
import { Sidebar } from './Sidebar'
import { currentUserAtom } from '@/store/dashboard'

export function DashboardLayout() {
  const [currentUser] = useAtom(currentUserAtom)
  
  // åˆ¤æ–­æ˜¯å¦æœ‰ç®¡ç†æƒé™
  const isAdmin = currentUser?.role === 'admin' || currentUser?.role === 'super_admin'

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <Header />
      
      {/* Main Content Area */}
      <div className="flex">
        {/* Sidebar */}
        <Sidebar isAdmin={isAdmin} />
        
        {/* Content */}
        <main className="flex-1 p-6">
          <Outlet />
        </main>
      </div>
    </div>
  )
}
```

### 4.2 è·¯ç”±é…ç½®æ›´æ–°

```tsx
// src/App.tsx
import { Routes, Route, Navigate } from 'react-router-dom'
import { DashboardLayout } from '@/components/layout/DashboardLayout'

// æ¦‚è§ˆé¡µé¢
import { OverviewPage } from '@/pages/overview/OverviewPage'
import { ActiveUsersPage } from '@/pages/active-users/ActiveUsersPage'
import { CodegenUsersPage } from '@/pages/codegen-users/CodegenUsersPage'
// ... å…¶ä»–æ¦‚è§ˆé¡µé¢

// ç®¡ç†é¡µé¢
import { UsersManagePage } from '@/pages/manage/users/UsersManagePage'
import { DevcloudUsersPage } from '@/pages/manage/devcloud-users/DevcloudUsersPage'
import { TabsManagePage } from '@/pages/manage/tabs/TabsManagePage'

// ç™»å½•é¡µé¢
import { LoginPage } from '@/pages/auth/LoginPage'

function App() {
  return (
    <Routes>
      {/* ç™»å½•é¡µé¢ - æ— å¸ƒå±€ */}
      <Route path="/login" element={<LoginPage />} />
      
      {/* ä¸»åº”ç”¨ - å¸¦å¸ƒå±€ */}
      <Route path="/" element={<DashboardLayout />}>
        {/* é»˜è®¤é‡å®šå‘åˆ°æ¦‚è§ˆ */}
        <Route index element={<Navigate to="/overview" replace />} />
        
        {/* æ¦‚è§ˆæ¨¡å— */}
        <Route path="overview" element={<OverviewPage />} />
        <Route path="active-users" element={<ActiveUsersPage />} />
        <Route path="codegen-users" element={<CodegenUsersPage />} />
        <Route path="codegen-details" element={<CodegenDetailsPage />} />
        <Route path="code-adoption" element={<CodeAdoptionPage />} />
        <Route path="youma-install" element={<YoumaInstallPage />} />
        <Route path="mcp-usage" element={<McpUsagePage />} />
        <Route path="extreme-sample" element={<ExtremeSamplePage />} />
        <Route path="cost-stats" element={<CostStatsPage />} />
        <Route path="language-stats" element={<LanguageStatsPage />} />
        <Route path="usage-days" element={<UsageDaysPage />} />
        <Route path="mode-usage" element={<ModeUsagePage />} />
        <Route path="autocomplete" element={<AutocompletePage />} />
        
        {/* ç®¡ç†æ¨¡å— */}
        <Route path="manage">
          <Route path="users" element={<UsersManagePage />} />
          <Route path="devcloud-users" element={<DevcloudUsersPage />} />
          <Route path="tabs" element={<TabsManagePage />} />
        </Route>
      </Route>
    </Routes>
  )
}

export default App
```

---

## äº”ã€ç›®å½•ç»“æ„è§„åˆ’

### 5.1 ç»„ä»¶ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/                    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx             # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx            # ä¾§è¾¹æ ï¼ˆå«èœå•é…ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ DashboardLayout.tsx    # ä¸»å¸ƒå±€å®¹å™¨
â”‚   â”‚   â””â”€â”€ index.ts               # å¯¼å‡ºæ–‡ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ ui/                        # åŸºç¡€UIç»„ä»¶
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ dropdown-menu.tsx      # éœ€è¦æ–°å¢
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ overview/                  # æ€»è§ˆé¡µé¢
â”‚   â”œâ”€â”€ active-users/              # æ´»è·ƒç”¨æˆ·
â”‚   â”œâ”€â”€ codegen-users/             # ä»£ç ç”Ÿæˆç”¨æˆ·
â”‚   â”œâ”€â”€ codegen-details/           # ä»£ç ç”Ÿæˆè¯¦æƒ…
â”‚   â”œâ”€â”€ code-adoption/             # é‡‡çº³AIä»£ç 
â”‚   â”œâ”€â”€ youma-install/             # YouMaå®‰è£…
â”‚   â”œâ”€â”€ mcp-usage/                 # MCPä½¿ç”¨
â”‚   â”œâ”€â”€ extreme-sample/            # ææ ·ç»Ÿè®¡
â”‚   â”œâ”€â”€ cost-stats/                # æˆæœ¬ç»Ÿè®¡
â”‚   â”œâ”€â”€ language-stats/            # è¯­è¨€ç»Ÿè®¡
â”‚   â”œâ”€â”€ usage-days/                # ä½¿ç”¨å¤©æ•°
â”‚   â”œâ”€â”€ mode-usage/                # æ¨¡å¼ä½¿ç”¨
â”‚   â”œâ”€â”€ autocomplete/              # è‡ªåŠ¨è¡¥å…¨
â”‚   â”‚
â”‚   â”œâ”€â”€ manage/                    # ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ users/                 # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ UsersManagePage.tsx
â”‚   â”‚   â”œâ”€â”€ devcloud-users/        # å¼€å‘äº‘ç”¨æˆ·å¯¼å…¥
â”‚   â”‚   â”‚   â””â”€â”€ DevcloudUsersPage.tsx
â”‚   â”‚   â””â”€â”€ tabs/                  # é¡µç­¾ç®¡ç†
â”‚   â”‚       â””â”€â”€ TabsManagePage.tsx
â”‚   â”‚
â”‚   â””â”€â”€ auth/                      # è®¤è¯ç›¸å…³
â”‚       â””â”€â”€ LoginPage.tsx
â”‚
â””â”€â”€ store/
    â””â”€â”€ dashboard.ts               # åŒ…å«ç”¨æˆ·çŠ¶æ€
```

---

## å…­ã€å®ç°æ­¥éª¤

### Step 1: å®‰è£…ä¾èµ–ï¼ˆå¦‚æœªå®‰è£…ï¼‰

```bash
# Radix UI ä¸‹æ‹‰èœå•ç»„ä»¶
pnpm add @radix-ui/react-dropdown-menu
```

### Step 2: åˆ›å»º DropdownMenu ç»„ä»¶

ä» shadcn/ui å¤åˆ¶ `dropdown-menu.tsx` åˆ° `src/components/ui/`

### Step 3: åˆ›å»º Header ç»„ä»¶

æŒ‰ç…§ 2.4 èŠ‚ä»£ç åˆ›å»º `src/components/layout/Header.tsx`

### Step 4: åˆ›å»º Sidebar ç»„ä»¶

æŒ‰ç…§ 3.5 èŠ‚ä»£ç åˆ›å»º `src/components/layout/Sidebar.tsx`

### Step 5: åˆ›å»º DashboardLayout ç»„ä»¶

æŒ‰ç…§ 4.1 èŠ‚ä»£ç åˆ›å»º `src/components/layout/DashboardLayout.tsx`

### Step 6: æ›´æ–°è·¯ç”±é…ç½®

æŒ‰ç…§ 4.2 èŠ‚ä»£ç æ›´æ–° `src/App.tsx`

### Step 7: æ›´æ–°ç”¨æˆ·çŠ¶æ€

ç¡®ä¿ `src/store/dashboard.ts` åŒ…å«ç”¨æˆ·è§’è‰²ä¿¡æ¯ï¼š

```typescript
export interface User {
  id: string
  email: string
  displayName: string
  role: 'unauthorized' | 'user' | 'admin' | 'super_admin'
}

export const currentUserAtom = atom<User | null>(null)
```

---

## ä¸ƒã€æ ·å¼å‚è€ƒ

### 7.1 é…è‰²æ–¹æ¡ˆ

| å…ƒç´  | é¢œè‰²å€¼ | Tailwind ç±» |
|------|--------|-------------|
| Header èƒŒæ™¯ | æ¸å˜è“ç´« | `bg-gradient-to-r from-blue-600 to-purple-600` |
| Sidebar èƒŒæ™¯ | ç™½è‰² | `bg-white` |
| èœå•æ¿€æ´»é¡¹èƒŒæ™¯ | æµ…è“ | `bg-blue-50` |
| èœå•æ¿€æ´»é¡¹æ–‡å­— | è“è‰² | `text-blue-600` |
| èœå•æ¿€æ´»é¡¹è¾¹æ¡† | è“è‰² | `border-blue-600` |
| èœå•æ‚¬åœèƒŒæ™¯ | æµ…ç° | `bg-gray-100` |
| åˆ†éš”çº¿ | ç°è‰² | `border-gray-200` |

### 7.2 å“åº”å¼è®¾è®¡

| æ–­ç‚¹ | Sidebar è¡Œä¸º |
|------|--------------|
| >= 1024px (lg) | å®Œæ•´æ˜¾ç¤º 256px å®½åº¦ |
| < 1024px | æŠ˜å ä¸ºå›¾æ ‡æ¨¡å¼æˆ–éšè—ï¼Œæ·»åŠ æ±‰å ¡èœå• |
| < 768px (md) | ç§»åŠ¨ç«¯æŠ½å±‰å¼ä¾§è¾¹æ  |

---

## å…«ã€å¾…åŠäº‹é¡¹æ¸…å•

- [ ] å®‰è£… `@radix-ui/react-dropdown-menu`
- [ ] åˆ›å»º `src/components/ui/dropdown-menu.tsx`
- [ ] åˆ›å»º `src/components/layout/Header.tsx`
- [ ] åˆ›å»º `src/components/layout/Sidebar.tsx`
- [ ] åˆ›å»º `src/components/layout/DashboardLayout.tsx`
- [ ] æ›´æ–° `src/App.tsx` è·¯ç”±é…ç½®
- [ ] æ›´æ–° `src/store/dashboard.ts` ç”¨æˆ·çŠ¶æ€
- [ ] åˆ›å»ºç®¡ç†æ¨¡å—é¡µé¢ç›®å½•ç»“æ„
- [ ] æµ‹è¯•ç™»å‡ºåŠŸèƒ½
- [ ] æµ‹è¯•èœå•å¯¼èˆª
- [ ] æµ‹è¯•æƒé™æ§åˆ¶ï¼ˆç®¡ç†èœå•ä»…ç®¡ç†å‘˜å¯è§ï¼‰
