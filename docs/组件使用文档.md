# 组件使用文档

> 本文档描述项目中所有可复用组件的文件位置、功能说明和使用方法

---

## 目录

- [基础 UI 组件](#基础-ui-组件)
  - [Button 按钮](#button-按钮)
  - [Input 输入框](#input-输入框)
  - [Label 标签](#label-标签)
  - [Card 卡片](#card-卡片)
  - [Combobox 可搜索选择框](#combobox-可搜索选择框)
  - [Checkbox 复选框](#checkbox-复选框)
  - [Tabs 标签页](#tabs-标签页)
- [业务组件](#业务组件)
  - [StatCard 统计卡片](#statcard-统计卡片)
  - [PeriodSelector 时间范围选择器](#periodselector-时间范围选择器)
  - [FilterBar 筛选条件栏](#filterbar-筛选条件栏)
  - [Pagination 分页控件](#pagination-分页控件)
  - [DataTable 数据表格](#datatable-数据表格)
  - [CheckboxGroup 复选框组](#checkboxgroup-复选框组)
  - [LoadingSpinner 加载动画](#loadingspinner-加载动画)
- [图表组件](#图表组件)
  - [TrendChart 趋势折线图](#trendchart-趋势折线图)
  - [BarChartComponent 柱状图](#barchartcomponent-柱状图)
  - [PieChartComponent 饼图](#piechartcomponent-饼图)

---

## 基础 UI 组件

### Button 按钮

**文件位置**: `src/components/ui/button.tsx`

**功能**: 通用按钮组件，支持多种变体和尺寸。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| variant | `"default" \| "secondary" \| "outline" \| "ghost" \| "destructive" \| "link"` | `"default"` | 按钮变体 |
| size | `"default" \| "sm" \| "lg" \| "icon"` | `"default"` | 按钮尺寸 |
| asChild | `boolean` | `false` | 是否作为子元素渲染 |

**使用示例**:
```tsx
import { Button } from "@/components/ui/button"

// 基础用法
<Button>默认按钮</Button>

// 不同变体
<Button variant="secondary">次要按钮</Button>
<Button variant="outline">描边按钮</Button>
<Button variant="destructive">危险按钮</Button>

// 不同尺寸
<Button size="sm">小按钮</Button>
<Button size="lg">大按钮</Button>

// 带图标
<Button>
  <Icon className="mr-2 h-4 w-4" />
  带图标按钮
</Button>
```

---

### Input 输入框

**文件位置**: `src/components/ui/input.tsx`

**功能**: 通用输入框组件。

**Props**: 继承 `React.InputHTMLAttributes<HTMLInputElement>` 的所有属性。

**使用示例**:
```tsx
import { Input } from "@/components/ui/input"

// 基础用法
<Input placeholder="请输入内容" />

// 带类型
<Input type="email" placeholder="请输入邮箱" />
<Input type="password" placeholder="请输入密码" />
<Input type="date" />

// 禁用状态
<Input disabled placeholder="禁用" />
```

---

### Label 标签

**文件位置**: `src/components/ui/label.tsx`

**功能**: 表单标签组件，用于标识输入字段。

**使用示例**:
```tsx
import { Label } from "@/components/ui/label"
import { Input } from "@/components/ui/input"

<div className="space-y-2">
  <Label htmlFor="email">邮箱</Label>
  <Input id="email" placeholder="请输入邮箱" />
</div>
```

---

### Card 卡片

**文件位置**: `src/components/ui/card.tsx`

**功能**: 卡片容器组件，包含 Header、Title、Description、Content、Footer 子组件。

**子组件**:
- `Card` - 卡片容器
- `CardHeader` - 卡片头部
- `CardTitle` - 卡片标题
- `CardDescription` - 卡片描述
- `CardContent` - 卡片内容
- `CardFooter` - 卡片底部

**使用示例**:
```tsx
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
  CardFooter,
} from "@/components/ui/card"

<Card>
  <CardHeader>
    <CardTitle>卡片标题</CardTitle>
    <CardDescription>卡片描述文字</CardDescription>
  </CardHeader>
  <CardContent>
    这里是卡片内容
  </CardContent>
  <CardFooter>
    <Button>操作按钮</Button>
  </CardFooter>
</Card>
```

---

### Combobox 可搜索选择框

**文件位置**: `src/components/ui/combobox.tsx`

**功能**: 支持输入搜索的下拉选择框组件，基于 Radix UI Popover。**不会阻止页面滚动**。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| options | `Array<{ value: string; label: string }>` | - | 选项数组 |
| value | `string` | - | 当前选中值 |
| onValueChange | `(value: string) => void` | - | 选中值改变回调 |
| placeholder | `string` | `"请选择"` | 未选择时的占位文字 |
| searchPlaceholder | `string` | `"搜索..."` | 搜索框占位文字 |
| emptyText | `string` | `"无匹配项"` | 无匹配结果时的提示 |
| className | `string` | - | 自定义类名 |
| disabled | `boolean` | `false` | 是否禁用 |

**使用示例**:
```tsx
import { Combobox } from "@/components/ui/combobox"

const [value, setValue] = useState("")

const options = [
  { value: "tech", label: "技术中心" },
  { value: "product", label: "产品中心" },
  { value: "operation", label: "运营中心" },
]

<Combobox
  options={options}
  value={value}
  onValueChange={setValue}
  placeholder="请选择BU"
  searchPlaceholder="搜索BU..."
/>
```

**特性**:
- 支持输入关键字搜索过滤选项
- 下拉框展开时**不阻止页面滚动**
- 自动匹配 label 和 value

---

### Checkbox 复选框

**文件位置**: `src/components/ui/checkbox.tsx`

**功能**: 复选框组件，基于 Radix UI。

**Props**:
| 属性 | 类型 | 说明 |
|------|------|------|
| checked | `boolean` | 是否选中 |
| onCheckedChange | `(checked: boolean) => void` | 选中状态改变回调 |
| disabled | `boolean` | 是否禁用 |

**使用示例**:
```tsx
import { Checkbox } from "@/components/ui/checkbox"
import { Label } from "@/components/ui/label"

const [checked, setChecked] = useState(false)

<div className="flex items-center space-x-2">
  <Checkbox
    id="terms"
    checked={checked}
    onCheckedChange={(val) => setChecked(val as boolean)}
  />
  <Label htmlFor="terms">我同意服务条款</Label>
</div>
```

---

### Tabs 标签页

**文件位置**: `src/components/ui/tabs.tsx`

**功能**: 标签页切换组件，基于 Radix UI。

**子组件**:
- `Tabs` - 根容器
- `TabsList` - 标签列表
- `TabsTrigger` - 标签按钮
- `TabsContent` - 标签内容

**使用示例**:
```tsx
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"

<Tabs defaultValue="tab1">
  <TabsList>
    <TabsTrigger value="tab1">标签一</TabsTrigger>
    <TabsTrigger value="tab2">标签二</TabsTrigger>
    <TabsTrigger value="tab3">标签三</TabsTrigger>
  </TabsList>
  <TabsContent value="tab1">标签一的内容</TabsContent>
  <TabsContent value="tab2">标签二的内容</TabsContent>
  <TabsContent value="tab3">标签三的内容</TabsContent>
</Tabs>
```

---

## 业务组件

### StatCard 统计卡片

**文件位置**: `src/components/common/StatCard.tsx`

**功能**: 展示统计数值的卡片组件，支持图标、多种颜色变体和加载状态。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| title | `string` | - | 卡片标题 |
| value | `string \| number` | - | 统计数值 |
| icon | `LucideIcon` | - | 图标组件 |
| variant | `"primary" \| "success" \| "warning" \| "danger" \| "info"` | `"primary"` | 颜色变体 |
| description | `string` | - | 描述文字（如占比） |
| loading | `boolean` | `false` | 加载状态 |

**使用示例**:
```tsx
import { StatCard } from "@/components/common/StatCard"
import { Users, DollarSign } from "lucide-react"

<div className="grid gap-4 md:grid-cols-4">
  <StatCard
    title="月活跃用户"
    value="1,234"
    icon={Users}
    variant="primary"
    description="占比: 78.5%"
  />
  <StatCard
    title="总花费"
    value="¥45,678"
    icon={DollarSign}
    variant="danger"
  />
  <StatCard
    title="加载中"
    value="-"
    variant="info"
    loading={true}
  />
</div>
```

---

### PeriodSelector 时间范围选择器

**文件位置**: `src/components/common/PeriodSelector.tsx`

**功能**: 时间范围快速选择组件，支持预设选项（昨日/7天/30天）和自定义日期范围。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| value | `"daily" \| "weekly" \| "monthly" \| "custom"` | - | 当前选中的周期 |
| onChange | `(value: PeriodValue) => void` | - | 周期改变回调 |
| options | `PeriodOption[]` | 默认4个选项 | 自定义选项 |
| dateRange | `{ from: string; to: string }` | - | 自定义日期范围初始值 |
| onDateRangeChange | `(range: DateRange) => void` | - | 日期范围改变回调 |
| onDateRangeApply | `(range: DateRange) => void` | - | 点击应用按钮回调 |

**使用示例**:
```tsx
import { PeriodSelector, type PeriodValue } from "@/components/common/PeriodSelector"

const [period, setPeriod] = useState<PeriodValue>("weekly")

<PeriodSelector
  value={period}
  onChange={setPeriod}
  onDateRangeApply={(range) => {
    console.log("应用日期范围:", range.from, "~", range.to)
    // 调用 API 获取数据
  }}
/>
```

---

### FilterBar 筛选条件栏

**文件位置**: `src/components/common/FilterBar.tsx`

**功能**: 组合多个筛选条件的工具栏，支持下拉选择和文本输入。

**Props**:
| 属性 | 类型 | 说明 |
|------|------|------|
| filters | `FilterItem[]` | 筛选项配置数组 |
| values | `Record<string, string>` | 当前筛选值 |
| onChange | `(key: string, value: string) => void` | 筛选值改变回调 |
| onClear | `() => void` | 清除按钮回调 |
| showExport | `boolean` | 是否显示导出按钮 |
| onExport | `() => void` | 导出按钮回调 |

**FilterItem 类型**:
```ts
interface FilterItem {
  key: string           // 筛选项唯一标识
  label: string         // 显示标签
  type: "select" | "input"  // 类型
  options?: Array<{ value: string; label: string }>  // select 类型的选项
  placeholder?: string  // 占位文字
}
```

**使用示例**:
```tsx
import { FilterBar, type FilterItem } from "@/components/common/FilterBar"

const filters: FilterItem[] = [
  {
    key: "bu",
    label: "BU",
    type: "select",
    placeholder: "所有BU",
    options: [
      { value: "all", label: "所有BU" },
      { value: "tech", label: "技术中心" },
    ],
  },
  {
    key: "search",
    label: "搜索",
    type: "input",
    placeholder: "搜索姓名...",
  },
]

const [filterValues, setFilterValues] = useState<Record<string, string>>({})

<FilterBar
  filters={filters}
  values={filterValues}
  onChange={(key, value) => setFilterValues(prev => ({ ...prev, [key]: value }))}
  onClear={() => setFilterValues({})}
  showExport
  onExport={() => exportToExcel()}
/>
```

---

### Pagination 分页控件

**文件位置**: `src/components/common/Pagination.tsx`

**功能**: 表格分页导航组件，支持首页/末页、上一页/下一页、页码跳转、每页条数设置。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| current | `number` | - | 当前页码 |
| pageSize | `number` | - | 每页条数 |
| total | `number` | - | 总条数 |
| pageSizeOptions | `number[]` | `[10, 20, 50, 100]` | 每页条数选项 |
| onChange | `(page: number) => void` | - | 页码改变回调 |
| onPageSizeChange | `(pageSize: number) => void` | - | 每页条数改变回调 |
| showSizeChanger | `boolean` | `true` | 是否显示每页条数选择器 |
| showQuickJumper | `boolean` | `true` | 是否显示快速跳转 |
| showTotal | `boolean` | `true` | 是否显示总数信息 |

**使用示例**:
```tsx
import { Pagination } from "@/components/common/Pagination"

const [current, setCurrent] = useState(1)
const [pageSize, setPageSize] = useState(10)

<Pagination
  current={current}
  pageSize={pageSize}
  total={156}
  onChange={setCurrent}
  onPageSizeChange={setPageSize}
/>
```

---

### DataTable 数据表格

**文件位置**: `src/components/common/DataTable.tsx`

**功能**: 数据表格组件，基于 @tanstack/react-table，支持自定义列和加载状态。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| columns | `ColumnDef<TData>[]` | - | 列定义数组 |
| data | `TData[]` | - | 数据数组 |
| loading | `boolean` | `false` | 加载状态 |
| emptyText | `string` | `"暂无数据"` | 空数据提示文字 |
| striped | `boolean` | `true` | 是否显示斑马纹 |

**使用示例**:
```tsx
import { DataTable } from "@/components/common/DataTable"
import { type ColumnDef } from "@tanstack/react-table"

interface User {
  id: number
  name: string
  email: string
}

const columns: ColumnDef<User>[] = [
  { accessorKey: "id", header: "序号" },
  { accessorKey: "name", header: "姓名" },
  { accessorKey: "email", header: "邮箱" },
  {
    accessorKey: "actions",
    header: "操作",
    cell: ({ row }) => (
      <Button size="sm" onClick={() => handleEdit(row.original)}>
        编辑
      </Button>
    ),
  },
]

const data: User[] = [
  { id: 1, name: "张三", email: "zhangsan@example.com" },
  { id: 2, name: "李四", email: "lisi@example.com" },
]

<DataTable columns={columns} data={data} loading={isLoading} />
```

---

### CheckboxGroup 复选框组

**文件位置**: `src/components/common/CheckboxGroup.tsx`

**功能**: 复选框组组件，支持全选/取消全选，适用于 BU/部门多选场景。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| label | `string` | - | 组标签 |
| options | `Array<{ value: string; label: string }>` | - | 选项数组 |
| value | `string[]` | - | 当前选中值数组 |
| onChange | `(value: string[]) => void` | - | 选中值改变回调 |
| showSelectAll | `boolean` | `true` | 是否显示全选按钮 |
| columns | `number` | `4` | 列数布局 |

**使用示例**:
```tsx
import { CheckboxGroup } from "@/components/common/CheckboxGroup"

const options = [
  { value: "tech", label: "技术中心" },
  { value: "product", label: "产品中心" },
  { value: "operation", label: "运营中心" },
]

const [selected, setSelected] = useState<string[]>(["tech"])

<CheckboxGroup
  label="BU选择"
  options={options}
  value={selected}
  onChange={setSelected}
  columns={3}
/>
```

---

### LoadingSpinner 加载动画

**文件位置**: `src/components/common/LoadingSpinner.tsx`

**功能**: 加载动画组件，支持三种尺寸。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| size | `"sm" \| "md" \| "lg"` | `"md"` | 尺寸 |
| className | `string` | - | 自定义类名 |

**使用示例**:
```tsx
import { LoadingSpinner } from "@/components/common/LoadingSpinner"

<LoadingSpinner size="sm" />
<LoadingSpinner size="md" />
<LoadingSpinner size="lg" />

// 居中显示
<div className="flex items-center justify-center py-10">
  <LoadingSpinner />
</div>
```

---

## 图表组件

### TrendChart 趋势折线图

**文件位置**: `src/components/charts/TrendChart.tsx`

**功能**: 趋势折线图组件，基于 Recharts，支持多条折线。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| data | `Array<Record<string, any>>` | - | 数据数组 |
| xKey | `string` | - | X轴数据键名 |
| lines | `Array<{ key: string; name: string; color: string }>` | - | 折线配置 |
| height | `number` | `300` | 图表高度 |

**使用示例**:
```tsx
import { TrendChart } from "@/components/charts/TrendChart"

const data = [
  { date: "12-17", 活跃用户: 120, 代码生成用户: 80 },
  { date: "12-18", 活跃用户: 135, 代码生成用户: 92 },
  { date: "12-19", 活跃用户: 148, 代码生成用户: 105 },
]

<TrendChart
  data={data}
  xKey="date"
  lines={[
    { key: "活跃用户", name: "活跃用户", color: "#3b82f6" },
    { key: "代码生成用户", name: "代码生成用户", color: "#10b981" },
  ]}
  height={300}
/>
```

---

### BarChartComponent 柱状图

**文件位置**: `src/components/charts/BarChartComponent.tsx`

**功能**: 柱状图组件，基于 Recharts，支持水平和垂直布局。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| data | `Array<Record<string, any>>` | - | 数据数组 |
| xKey | `string` | - | X轴数据键名 |
| bars | `Array<{ key: string; name: string; color: string }>` | - | 柱状配置 |
| height | `number` | `300` | 图表高度 |
| layout | `"horizontal" \| "vertical"` | `"horizontal"` | 布局方向 |

**使用示例**:
```tsx
import { BarChartComponent } from "@/components/charts/BarChartComponent"

const data = [
  { name: "技术中心", value: 450 },
  { name: "产品中心", value: 320 },
  { name: "运营中心", value: 280 },
]

<BarChartComponent
  data={data}
  xKey="name"
  bars={[{ key: "value", name: "活跃用户", color: "#8b5cf6" }]}
  height={300}
/>
```

---

### PieChartComponent 饼图

**文件位置**: `src/components/charts/PieChartComponent.tsx`

**功能**: 饼图/环形图组件，基于 Recharts。

**Props**:
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| data | `Array<{ name: string; value: number; color?: string }>` | - | 数据数组 |
| height | `number` | `300` | 图表高度 |
| innerRadius | `number` | `0` | 内圆半径（>0 为环形图） |
| outerRadius | `number` | `100` | 外圆半径 |
| showLabel | `boolean` | `true` | 是否显示百分比标签 |

**使用示例**:
```tsx
import { PieChartComponent } from "@/components/charts/PieChartComponent"

const data = [
  { name: "TypeScript", value: 35 },
  { name: "Python", value: 25 },
  { name: "Java", value: 20 },
  { name: "Go", value: 12 },
  { name: "其他", value: 8 },
]

// 饼图
<PieChartComponent data={data} height={250} outerRadius={80} />

// 环形图
<PieChartComponent data={data} height={250} innerRadius={50} outerRadius={80} />
```

---

## 组件演示页面

访问 `/demo` 路由可查看所有组件的实际效果。

### 删除演示页面

查看完成后，按以下步骤删除演示页面：

1. 删除文件: `src/pages/demo/ComponentsDemo.tsx`
2. 编辑 `src/App.tsx`:
   - 删除 `import { ComponentsDemo } from "@/pages/demo/ComponentsDemo"`
   - 删除 `<Route path="demo" element={<ComponentsDemo />} />`
